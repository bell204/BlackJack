<h1>블랙잭& TDD (개인 프로젝트)</h1>

개발기간
3.29 ~ 4.2

개발동기 
객체지향을 이해하는데는 뷰와 데이터베이스가 연결된 게시판보다, 도메인 규칙이 충분한 카드 게임이 좋을 것 같아서 구현해보았습니다.

또한 TDD에 대해 이해하기에도 좋을 것 같아서,
테스트 주도 개발(채수원 저)를 참고하여
TDD를 하며 게임을 구현해보았습니다.


<h2>테스트 순서</h2>

1 실패하는 테스트 코드

2 Test 결과 화면(빨강)

![13](https://user-images.githubusercontent.com/32535590/38289628-20b38cca-3812-11e8-92f9-418ff148af21.PNG)


3 테스트에 통과할만한 작은 코드 작성

![10-3](https://user-images.githubusercontent.com/32535590/38289720-93c2ecec-3812-11e8-9f89-b0f0be021423.PNG)


4 Test 성공 결과 화면 (초록)

![10](https://user-images.githubusercontent.com/32535590/38289604-0369b392-3812-11e8-83eb-548a4cc00f65.PNG)


5 리팩토링 코드 (예시)
![4](https://user-images.githubusercontent.com/32535590/38292956-c0ca9f88-3820-11e8-980c-435e7cff21ad.PNG)

-> 매직넘버를 상수로 치환

![5](https://user-images.githubusercontent.com/32535590/38292997-e1d6a26c-3820-11e8-900c-59838a76bd15.PNG)

-> 기존 코드에서 매직넘버를 상수로 변경 

![6](https://user-images.githubusercontent.com/32535590/38292998-e50256f2-3820-11e8-9275-24a756c69d1e.PNG)



<h2>기본 규칙</h2> 

1 카드는 4종류 (클로버, 하트, 다이아몬드, 스페이드) 이고,
   카드는 각 13장씩 총 52장을 한 세트로 한 게임에는 한 세트만 사용한다. 

2 딜러는 2장의 카드 합이 17미만이어야 한다. 

3 기본 게임은 1:1 게임이다. 

4 소유한 카드의 합이 21에 가장 근접한 사람이 승리한다. 

5 딜러는 17미만인 경우 카드를 계속 받는다.  

6 딜러와 유저 모두 21점을 넘을 수 없다. 

<h2>요구사항 분석</h2>

규칙을 살펴봤으니 이를 바탕으로 먼저 도메인의 핵심 개념과 요구조건을 파악해보겠습니다. 


<h4>1 객체 추출 </h4>

블랙잭의 경우 직관적으로 생각해보면 플레이어 / 딜러 / 카드덱 / 카드 이렇게 4개의 객체가 필요해 보입니다.  그런데 이러한 4개의 객체 자체만으로는 연결이 되지 않아 게임을 진행할 수 없습니다. 
그래서 객체의 동작 추출이 필요합니다.


또 생각해보면 4개 객체가 카드를 받는다고 할 때, 게임의 승자는 누구일까요? 
이것에 대한 답이 나오지 않았습니다. 
각자 플레이어들의 카드를 한 곳에 모아 승자를 결정하는 누군가가 필요합니다. 
따라서 4개의 객체에 더해서 점수에 따라 승리를 결정하는 규칙 객체가 필요합니다. 

=> 따라서 일단 플레이어/ 딜러/ 카드덱 / 카드 / 규칙 이렇게 5개의 객체가 필요해 보입니다. 


<h4>2 객체의 동작 추출 </h4>

1 플레이어 
-> 카드덱을 통해 카드를 받을 수 있습니다. 
-> 실제 게임에서 섞여 있는 카드에 접근하지, 카드에 바로 접근하지 않습니다.  


2 딜러 
-> 카드덱을 통해 카드를 받을 수 있습니다. 
-> 실제 게임에서 섞여 있는 카드에 접근하지, 카드에 바로 접근하지 않습니다. 
-> 추가로 카드를 받을 때 17점이 넘어가면 카드를 받지 않습니다. 


3 카드덱 (한 묶음(총 52개)의 카드) 
-> 처음에는 비어 있음. 
-> 카드를 가져와서 카드뭉치를 채워야 합니다. 
->카드 한장은 그룹의 속성이 없기 때문에 카드덱 객체가 필요합니다. 


4 카드 
->카드 한장의 경우 패턴과 숫자와 무늬가 있습니다. 
패턴의 경우- pattern (스페이드/ 크로버 / 다이아몬드 / 하트) 
무늬의 경우 - symbol (A, 2, 3, 4, 5, 6, 7, 8,  9, 10, J,   Q,  K)  
무늬의 점수 - point  (1, 2, 3, 4 ,5 ,6 ,7 ,8 , 9, 10, 10, 10, 10) 


5 규칙 
-> 플레이어와 딜러의 카드들을 받습니다. 
-> 받은 카드들을 비교해서 총 점수를 계산하고, 승자를 결정합니다.


<h2>구현 과정 설명(네이버 블로그)</h2>

1 깃허브 연동 https://blog.naver.com/bell2017/221236035592

2 블랙잭 요구분석 및 모델링 https://blog.naver.com/bell2017/221240385067

3 객체 추상화 https://blog.naver.com/bell2017/221240394331

4 TDD 하면서 구현  https://blog.naver.com/bell2017/221240568494

5 리팩토링   https://blog.naver.com/bell2017/221244768096
 


<h2>개선사항</h2>

1 프레임워크 네티를 사용하여 다인용 블랙잭 게임 구현.

2 화면(뷰)를 공부하여 화면 동작 추가.

3 테스트 커버리지 100%에 가깝게 추가 



<h2>참고자료</h2>

1 테스트 주도 개발(채수원 저)
2 자바로 배우는 리팩토링 입문(유키 히로시 저)
